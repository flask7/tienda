<ion-header>
  <ion-toolbar></ion-toolbar>
</ion-header>

<ion-content>
	<p class="misd">Mis direcciones de <b>envío</b></p>
	<p class="alias">Alias, identifica tus direcciones para diferenciarlas</p>
	<ion-grid>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Nombre <b>*</b></ion-label>
					<ion-input [(ngModel)]="nombre" name="nombre" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Apellidos <b>*</b></ion-label>
					<ion-input [(ngModel)]="apellidos" name="apellidos" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Empresa</ion-label>
					<ion-input [(ngModel)]="empresa" name="empresa"></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Dirección <b>*</b></ion-label>
					<ion-input value="{{ resultado }}" [(ngModel)]="direccion" name="direccion" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">CP <b>*</b></ion-label>
					<ion-input value="{{ ubicacion.postalCode }}" [(ngModel)]="cp" name="cp" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Ciudad <b>*</b></ion-label>
					<ion-input value="{{ ubicacion.locality }}" [(ngModel)]="ciudad" name="ciudad" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<!--<ion-searchbar debounce="1000" (ionInput)="buscar($event)" placeholder="Estado" class="barra_estados" showCancelButton="never" [(ngModel)]="estado" name="estado" autocorrect="on" required></ion-searchbar>-->
					<ion-label position="floating">Estado <b>*</b></ion-label>
					<ion-input [(ngModel)]="estado" name="estado" (click)="mostrar_lista = 1" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ng-container *ngIf="resultados.length > 0">
			<ion-row class="results">
				<ion-col>
					<ion-list class="lista_estados" *ngIf="mostrar_lista > 0">
	  					<ion-item lines="full" (click)="buscador_info(i)" class="results" *ngFor="let resultado of resultados; let i = index">
	  						<ion-label>{{ resultado.name }}</ion-label>
	  					</ion-item>
	  				</ion-list>
				</ion-col>
			</ion-row>
		</ng-container>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Teléfono <b>*</b></ion-label>
					<ion-input [(ngModel)]="telefono" name="telefono" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">Teléfono 2 <b>*</b></ion-label>
					<ion-input [(ngModel)]="telefono2" name="telefono2" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="11" class="divisores">
				<ion-item>
					<ion-label position="floating">DNI/ Cif/ Nif</ion-label>
					<ion-input [(ngModel)]="identificacion" name="identificacion" required></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
	
		<ion-row class="boton" *ngIf="adding < 1">
			<ion-item lines="none" class="carta">
				<ion-row>
					<ion-col size="12">
						<ion-label class="etiqueta">
							<b>Añadir nueva dirección</b>
						</ion-label>
					</ion-col>
				
					<ion-col size="12" class="separador">
						<ion-icon name="add-circle-outline" class="add" (click)="add_location()"></ion-icon>
					</ion-col>
				</ion-row>
			</ion-item>
		</ion-row>

		<ion-row class="boton" *ngIf="adding > 0">
			<ion-item lines="none" class="carta">
				<ion-row>
					<ion-col size="12">
						<ion-label class="etiqueta">
							<b>Actualizar dirección</b>
						</ion-label>
					</ion-col>
				
					<ion-col size="12" class="separador">
						<ion-icon name="pencil-outline" class="add" (click)="enviar_edicion(edicion)"></ion-icon>
					</ion-col>
				</ion-row>
			</ion-item>
		</ion-row>

		<ion-row *ngIf="direcciones.length > 0">
			<ng-container *ngFor="let direccion of direcciones; let i = index">
				<ion-col size="4">
					<ion-card class="tarjeta" (click)="mostrar = i + 1">
					  <ion-card-header>
					    <ion-card-subtitle>Dirección</ion-card-subtitle>
					    <ion-card-title>Detalle:</ion-card-title>
					  </ion-card-header>

					  <ion-card-content>
					    {{ direcciones[i].direccion }}
					  </ion-card-content>
					</ion-card>
					<ion-row *ngIf="mostrar == i + 1">
						<ion-col size="6">
							<ion-button (click)="borrar(direcciones[i].id)" color="danger" fill="solid">
								<ion-icon name="close-circle-outline"></ion-icon>
							</ion-button>
						</ion-col>
						<ion-col size="6">
							<ion-button (click)="editar(direcciones[i].id)" color="dark" fill="solid">
								<ion-icon name="pencil-outline"></ion-icon>
							</ion-button>
						</ion-col>
					</ion-row>
				</ion-col>
			</ng-container>
		</ion-row>
	</ion-grid>

</ion-content>
